# ============================================================================
# MaiaChat - Environment Variables
# ============================================================================
# Copy this file to .env.local for development or .env.production for production.
# Generate secrets with: openssl rand -base64 32
# ============================================================================

# ============================================================================
# REQUIRED - Core Settings
# ============================================================================

# Application URL (used for OAuth callbacks, links, etc.)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Application version (used for Sentry release tracking and health checks)
NEXT_PUBLIC_APP_VERSION=2.0.0

# Environment mode
NODE_ENV=development

# ============================================================================
# REQUIRED - Database (PostgreSQL with pgvector extension)
# ============================================================================

# PostgreSQL connection string
# Ensure pgvector extension is installed: CREATE EXTENSION IF NOT EXISTS vector;
DATABASE_URL=postgresql://maiachat:password@localhost:5432/maiachat

# ============================================================================
# REQUIRED - Redis (Session management, rate limiting, caching)
# ============================================================================

REDIS_URL=redis://localhost:6379

# ============================================================================
# REQUIRED - Encryption Key
# ============================================================================

# Used to encrypt stored API keys (AES-256-GCM)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# CRITICAL: Keep this safe! Losing it means losing access to encrypted data.
ENCRYPTION_KEY=

# ============================================================================
# REQUIRED - Authentication (Better Auth)
# ============================================================================

# Secret for session signing
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=

# Google OAuth for user login (optional - enables "Sign in with Google")
# Get from: Google Cloud Console > APIs & Services > Credentials > OAuth 2.0 Client
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Admin emails (comma-separated) - these users are auto-promoted to admin on login
ADMIN_EMAILS=admin@example.com

# Skip authentication for development (creates mock user automatically)
# DEV_BYPASS_AUTH=true

# ============================================================================
# GOOGLE INTEGRATION - Gmail & Calendar (Optional)
# ============================================================================

# OAuth credentials for Google services integration (Gmail, Calendar)
# This is SEPARATE from user authentication - this enables the email/calendar tools
# Get from: Google Cloud Console > APIs & Services > Credentials > OAuth 2.0 Client
# Redirect URI: https://yourdomain.com/api/integrations/google/callback
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=

# ============================================================================
# AI PROVIDER API KEYS (Optional - Users can add their own in Settings)
# ============================================================================

# These are fallback keys used when users don't have their own keys configured.
# In production, users typically add their own keys in Settings > API Keys.

# OpenAI - https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Anthropic - https://console.anthropic.com/
ANTHROPIC_API_KEY=

# Google AI (Gemini) - https://aistudio.google.com/app/apikey
# Note: Two env vars are used for Google AI:
#   GOOGLE_GENERATIVE_AI_API_KEY - for Gemini chat models (via Vercel AI SDK)
#   GOOGLE_AI_API_KEY            - for embeddings (via REST API)
# You can set both to the same key.
GOOGLE_GENERATIVE_AI_API_KEY=
GOOGLE_AI_API_KEY=

# X.ai (Grok) - https://x.ai/api
XAI_API_KEY=

# OpenRouter (100+ models) - https://openrouter.ai/keys
OPENROUTER_API_KEY=

# Deepgram (Speech-to-Text, Text-to-Speech) - https://console.deepgram.com/
DEEPGRAM_API_KEY=

# ============================================================================
# S3-COMPATIBLE STORAGE (Optional - for document storage)
# ============================================================================
#
# MaiaChat supports two naming conventions for S3 config.
# The S3_* variables are preferred; MINIO_* are legacy but still supported.
#
# --- Option A: S3-style variables (recommended for production) ---
#
# Works with AWS S3, Cloudflare R2, self-hosted MinIO, or any S3-compatible store.
#
# S3_ENDPOINT=https://s3.amazonaws.com        # AWS S3
# S3_ENDPOINT=https://ACCOUNT.r2.cloudflarestorage.com  # Cloudflare R2
# S3_ENDPOINT=https://minio.yourdomain.com    # Self-hosted MinIO
S3_ENDPOINT=http://localhost:9000
S3_REGION=us-east-1
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=maiachat-documents
#
# --- Option B: Legacy MINIO_* variables (for local development / backward compat) ---
#
# MINIO_ENDPOINT=localhost
# MINIO_PORT=9000
# MINIO_USE_SSL=false
# MINIO_ACCESS_KEY=minioadmin
# MINIO_SECRET_KEY=minioadmin
# MINIO_BUCKET=maiachat-documents

# ============================================================================
# ERROR TRACKING (Optional - Sentry)
# ============================================================================

# Get DSN from: https://sentry.io > Your Project > Settings > Client Keys
SENTRY_DSN=
NEXT_PUBLIC_SENTRY_DSN=

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable all file/shell tools without admin panel (for self-hosted single-user)
# MAIACHAT_LOCAL_MODE=true

# ============================================================================
# DOCKER SETTINGS
# ============================================================================

# Set to "true" when building for Docker deployment
# DOCKER=true

# Optional: path to system Chromium binary (useful in Docker Alpine images)
# PLAYWRIGHT_CHROMIUM_EXECUTABLE_PATH=/usr/bin/chromium-browser

# ============================================================================
# NOTES
# ============================================================================
#
# 1. SECURITY:
#    - Never commit real values to version control
#    - Use different secrets for each environment
#    - Rotate ENCRYPTION_KEY periodically (requires re-encrypting API keys)
#
# 2. DATABASE:
#    - Requires PostgreSQL 15+ with pgvector extension
#    - Run: CREATE EXTENSION IF NOT EXISTS vector;
#
# 3. GOOGLE INTEGRATION:
#    - Requires GOOGLE_OAUTH_CLIENT_ID and GOOGLE_OAUTH_CLIENT_SECRET
#    - Also requires enabling in config: integrations.google.enabled = true
#    - OAuth redirect URI must match: /api/integrations/google/callback
#
# 4. CLI TOOLS (Claude Code, Gemini):
#    - Requires cli.enabled = true in config
#    - Requires Command Execution enabled in admin settings
#    - Install the CLI: npm install -g @anthropic-ai/claude-code
#
# 5. RATE LIMITING:
#    - Redis is required for rate limiting and session management
#    - Without Redis, the app will fail to start
